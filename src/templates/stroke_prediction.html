<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Data Entry & Prediction</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/navigation_bar_style.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/stroke_prediction_style.css') }}" />
  <style>
    :root {
      --primary: #007bff !important; /* Blue */
    }
  </style>
  
</head>
<body>

<!-- ============================================ -->
<!--                 Navigation                   -->
<!-- ============================================ -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Services and File Upload</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/navigation_bar_style.css') }}" />
</head>
<header id="cs-navigation">
  <div class="cs-container">
    <a href="" class="cs-logo" aria-label="back to home">
      <img src="{{ url_for('static', filename='images/stroke_hero_text.svg') }}" class="hero-text" alt="Stroke Hero Logo" decoding="async">
    </a>
    <nav class="cs-nav" role="navigation">
      <button class="cs-toggle" aria-label="mobile menu toggle">
        <div class="cs-box">
          <span class="cs-line cs-line1"></span>
          <span class="cs-line cs-line2"></span>
          <span class="cs-line cs-line3"></span>
        </div>
      </button>
      <div class="cs-ul-wrapper">
        <ul id="cs-expanded" class="cs-ul" aria-expanded="false">
          <li class="cs-li"><a href="{{ url_for('home') }}" class="cs-li-link">Welcome</a></li>
          <li class="cs-li"><a href="{{ url_for('chatbot_routing') }}" class="cs-li-link">Chatbot</a></li>
          <li class="cs-li"><a href="{{ url_for('about_us_routing') }}" class="cs-li-link">About Us</a></li>
          {% if user %}
          <li class="cs-li"><a href="{{ url_for('stroke_prediction_routing') }}" class="cs-li-link">Stroke Prediction</a></li>
          {% endif %}
          <li class="cs-li"><a href="{{ url_for('self_assesment_routing') }}" class="cs-li-link">Self Assessment</a></li>
        </ul>
      </div>
    </nav>

    <!-- Show Login or Logout Button based on User Authentication -->
      {% if user %}
      <!-- If the user is logged in, show the Logout button -->
      <a href="{{ url_for('logout') }}" class="cs-button-solid cs-nav-button" style="background: linear-gradient(45deg, #0d3e4b, #0eafd7);">Logout</a>
      {% else %}
      <!-- If the user is not logged in, show the Login button -->
      <a href="{{ url_for('login') }}" class="cs-button-solid cs-nav-button" style="background: linear-gradient(45deg, #0d3e4b, #0eafd7);">Login</a>
    {% endif %}
  </div>
</header>


  <!-- Services Section -->
  <section id="services-285">
    <div class="cs-container">
      <div class="cs-content">
        <br><br><br><br><br><br>
        <h2 class="cs-title">Data Entry & Prediction</h2>
      </div>
      <ul class="cs-card-group">
        <li class="cs-item">
          <a href="#" class="cs-link">
            <picture class="cs-picture">
              <img class="cs-icon" src="https://www.svgrepo.com/show/532228/table-list.svg" alt="icon" width="38" height="52">
            </picture>
            <h3 class="cs-h3">Service Number 1</h3>
            <p class="cs-item-text">Download our CSV template and fill in the required columns.</p>
          </a>
        </li>
        <li class="cs-item">
          <a href="#" class="cs-link">
            <picture class="cs-picture">
              <img class="cs-icon" src="https://www.svgrepo.com/show/5500/upload-file.svg" alt="icon" width="38" height="52">
            </picture>
            <h3 class="cs-h3">Service Number 2</h3>
            <p class="cs-item-text">Upload the completed template and click submit.</p>
          </a>
        </li>
        <li class="cs-item">
          <a href="#" class="cs-link">
            <picture class="cs-picture">
              <img class="cs-icon" src="https://www.svgrepo.com/show/486820/report-text.svg" alt="icon" width="38" height="52">
            </picture>
            <h3 class="cs-h3">Service Number 3</h3>
            <p class="cs-item-text">Our model will analyze and return a prediction report.</p>
          </a>
        </li>
      </ul>
      <a href="#" class="cs-button-solid" style="background-color: rgb(58, 58, 237); color: white;">Download CSV Template</a>
    </div>
  </section>

  <!-- File Upload Section -->
  <div class="formbold-main-wrapper">
    <div class="formbold-form-wrapper">
      <form id="uploadForm">
        <label class="formbold-form-label formbold-form-label-2">
          Upload File (only CSV files are allowed)
        </label>

        <div class="formbold-mb-5 formbold-file-input">
          <input type="file" name="file" id="file" accept=".csv" hidden />
          <label for="file" class="formbold-dropzone">
            <div>
              <span class="formbold-drop-file">Drop files here</span>
              <span class="formbold-or">Or</span>
              <button type="button" onclick="document.getElementById('file').click()" class="formbold-browse">Browse</button>
            </div>
          </label>
        </div>

        <div class="formbold-file-list formbold-mb-5" id="fileList" style="display: none;">
          <div class="formbold-file-item">
            <span class="formbold-file-name" id="fileName">filename.csv</span>
            <button type="button" onclick="clearFile()">âœ•</button>
          </div>
          <div class="formbold-progress-bar">
            <div class="formbold-progress" id="progressBar" style="width: 0%"></div>
          </div>
        </div>

        <div><br><br>
          <button class="formbold-btn w-full" type="submit">Process Data</button>
        </div>

        <div class="loader-overlay" id="loader" style="display: none;">
          <div class="loader"></div>
        </div>
      </form>
    </div>
  </div>

  <script>
    const fileInput = document.getElementById("file");
    const fileList = document.getElementById("fileList");
    const fileNameSpan = document.getElementById("fileName");
    const progressBar = document.getElementById("progressBar");

    fileInput.addEventListener("change", () => {
      const file = fileInput.files[0];
      if (file && file.name.endsWith(".csv")) {
        fileNameSpan.textContent = file.name;
        fileList.style.display = "block";
        progressBar.style.width = "0%";
        let percent = 0;
        const interval = setInterval(() => {
          percent += 10;
          progressBar.style.width = percent + "%";
          if (percent >= 100) clearInterval(interval);
        }, 100);
      } else {
        alert("Please upload a CSV file.");
        fileInput.value = "";
        fileList.style.display = "none";
      }
    });

    function clearFile() {
      fileInput.value = "";
      fileList.style.display = "none";
      progressBar.style.width = "0%";
    }

    document.getElementById("uploadForm").addEventListener("submit", function (e) {
      e.preventDefault();
      if (!fileInput.files[0]) {
        alert("Please upload a file first.");
        return;
      }

      document.getElementById("loader").style.display = "flex";
      setTimeout(() => {
        document.getElementById("loader").style.display = "none";
        alert("Data processed successfully!");
        clearFile();
      }, 2000);
    });
  </script>

</body>
</html>
