<!-- ============================================ -->
<!--                 Navigation                   -->
<!-- ============================================ -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Services and File Upload</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/navigation_bar_style.css') }}" />
</head>
<header id="cs-navigation">
    <div class="cs-container">
        <!--Nav Logo-->
        <a href="" class="cs-logo" aria-label="back to home">
            <img src="https://csimg.nyc3.cdn.digitaloceanspaces.com/Icons%2Flogo-black.svg" alt="logo" width="210" height="29" aria-hidden="true" decoding="async">
        </a>
        <!--Navigation List-->
        <nav class="cs-nav" role="navigation">
            <!--Mobile Nav Toggle-->
            <button class="cs-toggle" aria-label="mobile menu toggle">
                <div class="cs-box" aria-hidden="true">
                    <span class="cs-line cs-line1" aria-hidden="true"></span>
                    <span class="cs-line cs-line2" aria-hidden="true"></span>
                    <span class="cs-line cs-line3" aria-hidden="true"></span>
                </div>
            </button>
            <!-- We need a wrapper div so we can set a fixed height on the cs-ul in case the nav list gets too long from too many dropdowns being opened and needs to have an overflow scroll. This wrapper acts as the background so it can go the full height of the screen and not cut off any overflowing nav items while the cs-ul stops short of the bottom of the screen, which keeps all nav items in view no matter how mnay there are-->
            <div class="cs-ul-wrapper">
              <ul id="cs-expanded" class="cs-ul" aria-expanded="false">
                <li class="cs-li">
                    <a href="{{ url_for('chatbot_routing') }}" class="cs-li-link">Chatbot</a>
                </li>       
                <li class="cs-li">
                    <a href="" class="cs-li-link">About Us</a>
                </li>  
                {% if session['role'] == 'staff' %}
                <li class="cs-li">
                    <a href="{{ url_for('data_entry_routing') }}" class="cs-li-link">Data Entry</a>
                </li>
                {% endif %}
            
                {% if session['role'] == 'customer' %}
                <li class="cs-li">
                    <a href="{{ url_for('self_assesment_routing') }}" class="cs-li-link">Self Assessment</a>
                </li>
                {% endif %}
              </ul>   
            </div>
        </nav>
        <a href="{{ url_for('logout') }}" class="cs-button-solid cs-nav-button" style="background-color: blue;">Logout</a>
        <!--Dark Mode toggle, uncomment button code if you want to enable a dark mode toggle-->
        <!-- <button id="dark-mode-toggle" aria-label="dark mode toggle">
            <svg class="cs-moon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 480" style="enable-background:new 0 0 480 480" xml:space="preserve"><path d="M459.782 347.328c-4.288-5.28-11.488-7.232-17.824-4.96-17.76 6.368-37.024 9.632-57.312 9.632-97.056 0-176-78.976-176-176 0-58.4 28.832-112.768 77.12-145.472 5.472-3.712 8.096-10.4 6.624-16.832S285.638 2.4 279.078 1.44C271.59.352 264.134 0 256.646 0c-132.352 0-240 107.648-240 240s107.648 240 240 240c84 0 160.416-42.688 204.352-114.176 3.552-5.792 3.04-13.184-1.216-18.496z"/></svg>
            <img class="cs-sun" aria-hidden="true" src="https://csimg.nyc3.cdn.digitaloceanspaces.com/Icons%2Fsun.svg" decoding="async" alt="moon" width="15" height="15">
        </button> -->
    </div>
</header>
                                
<!-- ============================================ -->
<!--                  Services                    -->
<!-- ============================================ -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Services and File Upload</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/data_entry_style.css') }}" />   
</head>
<section id="services-285">
    <div class="cs-container">
        <div class="cs-content">
            <br><br>
            <br><br>
            <br><br>
            <br><br>
            <h2 class="cs-title">Data Entry & Prediction</h2>
        </div>
        <ul class="cs-card-group">
            <li class="cs-item">
                <a href="" class="cs-link">
                    <picture class="cs-picture">
                        <img class="cs-icon" src="https://www.svgrepo.com/show/532228/table-list.svg" loading="lazy" decoding="async" alt="icon" width="38" height="52" aria-hidden="true">
                    </picture>
                    <h3 class="cs-h3">Service Number 1</h3>
                    <p class="cs-item-text">
                        Download our CSV template and fill in the required collumns.
                    </p>
                </a>
            </li>
            <li class="cs-item">
                <a href="" class="cs-link">
                    <picture class="cs-picture">
                        <img class="cs-icon" src="https://www.svgrepo.com/show/5500/upload-file.svg" loading="lazy" decoding="async" alt="icon" width="38" height="52" aria-hidden="true">
                    </picture>
                    <h3 class="cs-h3">Service Number 2</h3>
                    <p class="cs-item-text">
                        Once you have completed the template, upload it and press submit.
                    </p>
                </a>
            </li>
            <li class="cs-item">
                <a href="" class="cs-link">
                    <picture class="cs-picture">
                        <img class="cs-icon" src="https://www.svgrepo.com/show/486820/report-text.svg" loading="lazy" decoding="async" alt="icon" width="38" height="52" aria-hidden="true">
                    </picture>
                    <h3 class="cs-h3">Service Number 3</h3>
                    <p class="cs-item-text">
                        Our model will process the data and return a report.
                    </p>
                </a>
            </li>
        </ul>
        <a href="" class="cs-button-solid" style="background-color: rgb(58, 58, 237); color: white;">Download CSV Template</a>
    </div>
</section>


<!-- ============================================ -->
<!--                  File Upload                 -->
<!-- ============================================ -->

<div class="formbold-main-wrapper">
  <div class="formbold-form-wrapper">
    <form id="uploadForm">
      <label class="formbold-form-label formbold-form-label-2">
        Upload File (only CSV files are allowed)
      </label>

      <!-- Dropzone -->
      <div class="formbold-mb-5 formbold-file-input">
        <input type="file" name="file" id="file" accept=".csv" hidden />
        <label for="file" class="formbold-dropzone">
          <div>
            <span class="formbold-drop-file"> Drop files here </span>
            <span class="formbold-or"> Or </span>
            <button type="button" onclick="document.getElementById('file').click()" class="formbold-browse">Browse</button>
          </div>
        </label>
      </div>

      <!-- File List with Progress -->
      <div class="formbold-file-list formbold-mb-5" id="fileList" style="display: none;">
        <div class="formbold-file-item">
          <span class="formbold-file-name" id="fileName">filename.csv</span>
          <button type="button" onclick="clearFile()">
            âœ•
          </button>
        </div>
        <div class="formbold-progress-bar">
          <div class="formbold-progress" id="progressBar" style="width: 0%"></div>
        </div>
      </div>

      <!-- Submit -->
      <div>
        <br><br>
        <button class="formbold-btn w-full" type="submit">Process Data</button>
      </div>

      <!-- Loader Overlay -->
      <div class="loader-overlay" id="loader" style="display: none;">
        <div class="loader"></div>
      </div>
    </form>
  </div>
</div>

<script>
  const fileInput = document.getElementById("file");
  const fileList = document.getElementById("fileList");
  const fileNameSpan = document.getElementById("fileName");
  const progressBar = document.getElementById("progressBar");

  fileInput.addEventListener("change", () => {
    const file = fileInput.files[0];
    if (file && file.name.endsWith(".csv")) {
      fileNameSpan.textContent = file.name;
      fileList.style.display = "block";

      // Fake progress animation
      progressBar.style.width = "0%";
      let percent = 0;
      const interval = setInterval(() => {
        percent += 10;
        progressBar.style.width = percent + "%";
        if (percent >= 100) clearInterval(interval);
      }, 100);
    } else {
      alert("Please upload a CSV file.");
      fileInput.value = "";
      fileList.style.display = "none";
    }
  });

  function clearFile() {
    fileInput.value = "";
    fileList.style.display = "none";
    progressBar.style.width = "0%";
  }

  // Submit handling
  document.getElementById("uploadForm").addEventListener("submit", function (e) {
    e.preventDefault();
    if (!fileInput.files[0]) {
      alert("Please upload a file first.");
      return;
    }

    document.getElementById("loader").style.display = "flex";
    setTimeout(() => {
      document.getElementById("loader").style.display = "none";
      alert("Data processed successfully!");
      clearFile();
    }, 2000);
  });
</script>
  